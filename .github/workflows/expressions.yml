name: expressions CI
on: push

env:
  MY_BOOLEAN: ${{ true }}
  MY_NULL:    ${{ null }}
  MY_NUMBER:  ${{ 0xff }}
  MY_STRING:  ${{ 'Hello!' }}

jobs:
  expressions:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        os: [ubuntu-latest, macos-latest]

    # Use plain '&&'. If your default branch is 'main', change master -> main
    if: ${{ github.ref == 'refs/heads/master' && contains(matrix.os, 'ubuntu') }}

    steps:
      - name: Show OS
        run: echo "OS=${{ matrix.os }}"

      - name: Convert current job to JSON
        run: echo "${{ toJSON(job) }}"

      - name: Parse JSON into env
        env: ${{ fromJSON('{"FOO":"bar"}') }}
        run: echo "$FOO"

      - name: All good (runs if previous steps succeeded)
        if: ${{ success() }}
        run: echo "All good"

      - name: Always runs
        if: ${{ always() }}
        run: echo "This always runs"
